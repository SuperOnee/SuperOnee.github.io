<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Nathan's Blog - 自己选的路, 跪着也要走完.</title><meta name="author" content="Nathan"><meta name="copyright" content="Nathan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="Nathan&#39;s Blog">
<meta property="og:url" content="https://nathan98.gitee.io/index.html">
<meta property="og:site_name" content="Nathan&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="Nathan">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://nathan98.gitee.io/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-04-28 23:50:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><meta name="generator" content="Hexo 5.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/loading.gif" data-original="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Nathan's Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Nathan's Blog</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/SuperOnee" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/nathanneil66@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/18137b31.html" title="Java8新特性Stream流api实用的一些封装">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/java/javalogo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java8新特性Stream流api实用的一些封装"></a></div><div class="recent-post-info"><a class="article-title" href="/post/18137b31.html" title="Java8新特性Stream流api实用的一些封装">Java8新特性Stream流api实用的一些封装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-28T09:52:17.000Z" title="发表于 2021-03-28 17:52:17">2021-03-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a></span></div><div class="content">
在某些业务场景中, 我们经常会对集合中的数据进行处理, Java8 提供了 Stream API 可以让我们很方便地处理集合中的数据, 例如, 分组, 过滤, 排序等, 但是每次处理数据的时候都要开流去处理, 所以我们可以对stream api进行一些简单的封装, 这样的话一些通用场景下就不需要写重复的逻辑了. 


功能介绍经过一阵子的努力, 我简单的封装了一个工具类, 目前工具类中功能大概有以下几个:

 List 分组, 可以整合分组后的结果, 例如根据 dept 对 user 进行分组后, value 整合为 user 的分数之类的.
 List 排序, 单字段 / 多字段排序.
 List 根据字段寻找最小值 / 最大值 元素.
 List 中某个对象的值合并, 例如求某个字段的总和 / 平均值
 List 某个字段统计数据获取(最小值, 最大值, 平均值, 总和等)
 List 转 Map
 Map 的排序, 可以根据 key / value 进行排序
 List 转换为其他集合, 数组转换为集合.
 List 根据某个字段去重.

List 分组根据字段简单分组首先先准 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/d2ec29ac.html" title="vue+element ui动态表单校验">     <img class="post_bg" src="/loading.gif" data-original="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue+element ui动态表单校验"></a></div><div class="recent-post-info"><a class="article-title" href="/post/d2ec29ac.html" title="vue+element ui动态表单校验">vue+element ui动态表单校验</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-26T09:37:57.000Z" title="发表于 2021-02-26 17:37:57">2021-02-26</time></span></div><div class="content">Vue+Element ui实现动态表单校验需求在工作中遇到一个棘手的页面需求, 页面的表单需要动态添加, 而且每个新增的表单项都要绑定上相应的校验规则. 

实现步骤
准备表单代码, 重点是在表单的双向绑定和prop属性绑定
&lt;el-form
       :model="ruleForm"
       ref="ruleForm"
       label-width="120px"
       class="demo-ruleForm"
       size="medium"
     >
       &lt;div v-for="(item, index) in ruleForm.contactList" :key="index">
         &lt;el-form-item
           label="真实姓名"
           :prop="'contactList.' + index + '.realName'"
           :rules="item.rules[0]" 
         >
           &lt;e ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/dbe9df0a.html" title="SpringCloud-Gateway整合">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-Gateway整合"></a></div><div class="recent-post-info"><a class="article-title" href="/post/dbe9df0a.html" title="SpringCloud-Gateway整合">SpringCloud-Gateway整合</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-07T01:54:54.000Z" title="发表于 2021-02-07 09:54:54">2021-02-07</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">简介概述

Gateway 是在 Spring 生态系统之上构建的 API 网关服务, 基于 Spring5, Spring Boot2 和 Project Reactor 等技术. Gateway 提供一种简单而有效的方式来对 API 进行路由, 以及提供一些强大的过滤器功能, 例如: 熔断, 限流, 重试等.
SpringCloud Gateway 作为 SpringCloud 生态系统中的网关, 目标是代替 zuul 在 SpringCloud2.0 以上版本中, 没有对新版本 zuul2.0 以上最新高性能版本进行集成, 仍然还是用的 zuul1.x 非 Reactor 模式的老版本. 而为了提升网关的性能, SpringCloud Gateway 是基于WebFlux框架实现的, 而 WebFlux 框架底层使用了高性能的 Reactor 通信框架 Netty.
SpringCloud Gateway 的目标提供统一的路由方式且基于 Filter 链的方式提供了网关基本的功能, 例如: 安全, 监控/指标, 和限流.

SpringCloud Gateway 是怎么工作的?
 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/d0cc1785.html" title="SpringCloud-CircuitBreaker-resilience4j整合">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-CircuitBreaker-resilience4j整合"></a></div><div class="recent-post-info"><a class="article-title" href="/post/d0cc1785.html" title="SpringCloud-CircuitBreaker-resilience4j整合">SpringCloud-CircuitBreaker-resilience4j整合</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-06T09:25:11.000Z" title="发表于 2021-02-06 17:25:11">2021-02-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">简介上一篇文章是整合的 Hystrix, 由于 Hystrix 已经停止更新不再增加新功能了, Spring 官方更推荐的方案是使用 Resilience4j 作为这个 Circuit Breaker, 文档地址.

Resilience4J 简介:
Resilience4j 是一个轻量级的容错组件,其灵感来自于 Hystrix,但主要为 Java 8 和函数式编程所设计.轻量级体现在其只用 Vavr 库（前身是 Javaslang）,没有任何外部依赖.而 Hystrix 依赖了 Archaius ,Archaius 本身又依赖很多第三方包,例如 Guava, Apache Commons Configuration 等.


Resilience4j 提供了如下几款核心组件

resilience4j-circuitbreaker: Circuit breaking
resilience4j-ratelimiter: Rate limiting
resilience4j-bulkhead: Bulkheading
resilience4j-retry: Automatic retry ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/28df3b26.html" title="SpringCloud-Hystrix整合">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-Hystrix整合"></a></div><div class="recent-post-info"><a class="article-title" href="/post/28df3b26.html" title="SpringCloud-Hystrix整合">SpringCloud-Hystrix整合</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-06T06:59:20.000Z" title="发表于 2021-02-06 14:59:20">2021-02-06</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">Netflix-Hystrix 概述Hystrix 简介Hystrix 已经停更进维了, 官宣地址

Hystrix 是什么?
官网资料
在分布式系统, 我们一定会依赖各种服务, 那么这些个服务一定会出现失败的情况, Hystrix 就是这样的一个工具, 它通过提供了逻辑上延时和错误容忍的解决力来协助我们完成分布式系统的交互. Hystrix 通过分离服务的调用点, 阻止错误在各个系统的传播, 并且提供了错误回调机制, 这一系列的措施提高了系统的整体服务弹性.
“断路器” 本身是一种开关装置, 当某个服务单元发生了故障之后, 通过断路器的故障监控(类似于熔断保险丝), 向调用方返回一个符合预期的, 可处理的备选响应(FallBack), 而不是长时间的等待或者抛出调用方无法处理的异常, 这样就保证了服务调用方的线程不会被长时间, 不必要地占用, 从而避免了故障在分布式系统中的蔓延, 乃至雪崩.

Hystrix 的设计原则: 

阻止一个单独的依赖耗尽系统的所有线程,比如(tomcat).
使用快速失败代替将这个请求排队.
在任何可能失败的地方提供后退机制来确保用户不会看到错误.
使用 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/71a31184.html" title="SpringCloud-OpenFeign整合">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-OpenFeign整合"></a></div><div class="recent-post-info"><a class="article-title" href="/post/71a31184.html" title="SpringCloud-OpenFeign整合">SpringCloud-OpenFeign整合</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-04T05:30:37.000Z" title="发表于 2021-02-04 13:30:37">2021-02-04</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">OpenFeign 简介由于 Feign 也进入了维护, 所以就有了 OpenFeign 这个代替品.
什么是 Feign?
openFeign 官方文档

Feign 是一个声明式 WebService 客户端. 使用 Feign 能让编写 Web Service 客户端更简单. 它的使用方法是定义一个服务接口然后在上面添加注解. Feign 也支持可拔插式的编码器和解码器. SpringCloud 对 Feign 进行了封装, 使其支持了 Spring MVC 标准注解和 HttpMessageConverters. Feign 可以与 Eureka 和 Ribbon 组合使用以支持负载均衡.

Feign 能干什么?

Feign 能干什么Feign 旨在使编写 Java Http 客户端变得更容易.前面在使用 Ribbon+RestTemplate 时, 利用 RestTemplate 对 http 请求的封装处理, 形成了一套模版化的调用方法. 但是在实际开发中, 由于对服务依赖的调用可能不止一处, 往往一个接口会被多处调用, 所以通常都会针对每个微服务自行封装一些客户端类来 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/91f57787.html" title="SpringCloud-LoadBalancer整合">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-LoadBalancer整合"></a></div><div class="recent-post-info"><a class="article-title" href="/post/91f57787.html" title="SpringCloud-LoadBalancer整合">SpringCloud-LoadBalancer整合</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-03T07:04:44.000Z" title="发表于 2021-02-03 15:04:44">2021-02-03</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">LoadBalancer 简介LoadBalancer 是什么? 由于 SpringCloud Netflix 的 Ribbon 目前进入了维护模式, LoadBalancer 是 SpringCloud 开发的 Ribbon 替换方案.
Ribbon 是用来实现一套客户端的负债均衡工具, 其主要的功能就是提供客户端的软件负债均衡算法和服务的调用. Ribbon 客户端组件提供一系列完善的配置项如连接超时, 重试等. 简单的说, 就是在配置文件中列出 LoadBalancer (简称 LB) 后面所有的机器, Ribbon 会自动的帮助你基于某种规则 (如简单轮询, 随机连接等) 去连接这些机器. 我们可以通过 Ribbon 轻易地实现自定义的负债均衡算法.
LB (负载均衡)集中式 LB即在服务的消费方和提供方之间使用独立的 LB 设施(可以是硬件, 如 F5, 也可以是软件, 如 nginx), 由该设施负责把访问请求通过某种策略转发至服务的提供方.
进程内 LB将 LB 逻辑集成到消费方, 消费方从服务注册中心获知有哪些地址可用, 然后自己再从这些地址中选择出一个合适的服务器.
 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/eff476c1.html" title="SpringCloud-Eureka整合">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-Eureka整合"></a></div><div class="recent-post-info"><a class="article-title" href="/post/eff476c1.html" title="SpringCloud-Eureka整合">SpringCloud-Eureka整合</a><div class="article-meta-wrap"><span class="article-meta"><i class="fas fa-thumbtack sticky"></i><span class="sticky">置顶</span><span class="article-meta__separator">|</span></span><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-02-02T03:18:28.000Z" title="发表于 2021-02-02 11:18:28">2021-02-02</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">Eureka 简介Eureka 在微服务架构中扮演的角色是注册中心.
Eureka 架构中的三个核心角色:

服务注册中心
eureka 的服务端应用, 提供服务注册和发现功能. 现实中的例子: 好比是物业公司.

服务提供者
提供服务的应用, 这里应用可以是 springboot 应用. 现实中的例子: 好比是房东, 商铺或房子的主人.

服务消费者
消费应用从注册中心获取服务列表, 从而得知每个服务的信息, 知道需要调用哪个服务方进行消费.现实中的例子: 好比是房子或商铺的租户.

总结
结合上述例子: 注册中心就好比是物业公司, 房东把房子或商铺注册到物业公司, 这样的话消费者也就是租户只需要去找物业公司获取自己想要的商铺和房子就行了. 大概就是这样…


服务治理和服务注册SpringCloud 封装了 Netflix 公司开发的 Eureka 模块来实现服务治理.
在传统的 rpc 远程调用框架中, 管理每个服务与服务之间的依赖关系比较复杂, 所以需要使用服务治理来管理服务与服务之间的关系, 可以实现服务调用, 负载均衡, 容错等, 实现服务发现与注册.
什么是服务注册与发现 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/d84ab946.html" title="MacOS搭建Docker环境">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/docker/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MacOS搭建Docker环境"></a></div><div class="recent-post-info"><a class="article-title" href="/post/d84ab946.html" title="MacOS搭建Docker环境">MacOS搭建Docker环境</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-31T09:06:11.000Z" title="发表于 2021-01-31 17:06:11">2021-01-31</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/Docker/">Docker</a></span></div><div class="content">Docker 安装Docker 是一个开源的应用容器引擎, 让开发者可以打包他们的应用以及依赖包到一个可移植的镜像中, 然后发布到任何流行的 Linux 或 Windows 机器上, 也可以实现虚拟化. 容器是完全使用沙箱机制, 相互之间不会有任何接口.
安装步骤非常简单.

首先进入docker 官网找到适合自己的版本后点击下载.



下载完后进行 docker 的安装, 安装完后就可以启动 docker 了.

安装完 Docker 后打开终端输入 docker. 看到终端返回内容如下表示安装成功.


Usage:  docker [OPTIONS] COMMAND

A self-sufficient runtime for containers

Options:
      --config string      Location of client config files (default "/Users/spongebob/.docker")
  -c, --context string     Name of the context to use to conn ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/1380e7fc.html" title="SpringBoot整合JWT+Security">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/jwt/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot整合JWT+Security"></a></div><div class="recent-post-info"><a class="article-title" href="/post/1380e7fc.html" title="SpringBoot整合JWT+Security">SpringBoot整合JWT+Security</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-12T17:21:10.000Z" title="发表于 2021-01-13 01:21:10">2021-01-13</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a></span></div><div class="content">JsonWebToken此博文延续了之前的Security进行整合的. 
简介JWT 英文全写为 JSON WEB TOKENS.由于 http 协议是无状态的,所以客户端每次访问都是新的请求. 这样每次请求都需要验证身份, 传统方式是用 session+cookie 来记录/传输用户信息, 而 JWT 就是更安全方便的方式. 它的特点就是简洁, 紧凑和自包含, 而且不占空间, 传输速度快, 而且有利于多端分离, 接口的交互等等.JWT 是一种 Token 规范主要面向的还是登录, 验证和授权方向, 当然也可以用只来传递信息. 一般都是存在 header 里, 也可以存在 cookie 里.JWT 由 3 个部分构成: header(头部), payload(载荷)和 signature(签名).
Header 头部信息: 指定类型和算法
Payload 荷载信息: 存放Claims声明信息
Signature 签名: 把前两者对应的Json结构进行base64url编码之后的字符串拼接起来和密钥放一起加密后的签名
组成方式为 header.payload.signature
eyJh ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/post/cdf5afeb.html" title="SpringDataJpa动态查询">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringDataJpa动态查询"></a></div><div class="recent-post-info"><a class="article-title" href="/post/cdf5afeb.html" title="SpringDataJpa动态查询">SpringDataJpa动态查询</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-11T08:57:49.000Z" title="发表于 2021-01-11 16:57:49">2021-01-11</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a><i class="fas fa-angle-right"></i><a class="article-meta__categories" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/">框架</a></span></div><div class="content">使用 SpringDataJpa 的 Critera API 和 Specification 完成动态查询.
Criteria API 使用延续上篇security的博文, 表结构, 实体都一致. 
CriteriaQuery select 操作CriteriaQuery 提供了一系列的查询方法, 例如: select, multiSelect, having 等.

使用 select 函数从 User 表中查出指定字段, 例如 Username 字段.
实现步骤:

使用 entityManager 拿到 CriteriaBuilder
使用 criteriaBuilder 创建 criteriaQuery
从 query 拿到 root class(也就是 User)
最后使用 EntityManager 创建查询并返回查询结果.



select 使用@SpringBootTest
class UserRepositoryTest &#123;
    //entityManager注入的两个方式, 1. @Autowired, 2. @PersistenceContext
 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/post/757ffcd6.html" title="SpringBoot整合Security权限校验">     <img class="post_bg" src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot整合Security权限校验"></a></div><div class="recent-post-info"><a class="article-title" href="/post/757ffcd6.html" title="SpringBoot整合Security权限校验">SpringBoot整合Security权限校验</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-01-08T06:55:55.000Z" title="发表于 2021-01-08 14:55:55">2021-01-08</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/JAVA/">JAVA</a></span></div><div class="content">数据库设计数据库持久层访问框架使用 SpringDataJpa, 只需要创建实体类即可, 框架会自动生成表.数据库表创建完后关系图如下:



初步准备
准备 pom 依赖

&lt;dependencies>
    &lt;dependency>
        &lt;groupId>org.springframework.boot&lt;/groupId>
        &lt;artifactId>spring-boot-starter-security&lt;/artifactId>
    &lt;/dependency>
    &lt;dependency>
        &lt;groupId>org.springframework.boot&lt;/groupId>
        &lt;artifactId>spring-boot-starter-web&lt;/artifactId>
    &lt;/dependency>
    &lt;dependency>
        &lt;groupId>org.projectlombok&lt;/gro ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/#content-inner">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/2/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/loading.gif" data-original="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Nathan</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">30</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/SuperOnee" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/nathanneil66@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/18137b31.html" title="Java8新特性Stream流api实用的一些封装"><img src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/java/javalogo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java8新特性Stream流api实用的一些封装"/></a><div class="content"><a class="title" href="/post/18137b31.html" title="Java8新特性Stream流api实用的一些封装">Java8新特性Stream流api实用的一些封装</a><time datetime="2021-03-28T09:52:17.000Z" title="发表于 2021-03-28 17:52:17">2021-03-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/d2ec29ac.html" title="vue+element ui动态表单校验"><img src="/loading.gif" data-original="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue+element ui动态表单校验"/></a><div class="content"><a class="title" href="/post/d2ec29ac.html" title="vue+element ui动态表单校验">vue+element ui动态表单校验</a><time datetime="2021-02-26T09:37:57.000Z" title="发表于 2021-02-26 17:37:57">2021-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/dbe9df0a.html" title="SpringCloud-Gateway整合"><img src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-Gateway整合"/></a><div class="content"><a class="title" href="/post/dbe9df0a.html" title="SpringCloud-Gateway整合">SpringCloud-Gateway整合</a><time datetime="2021-02-07T01:54:54.000Z" title="发表于 2021-02-07 09:54:54">2021-02-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/d0cc1785.html" title="SpringCloud-CircuitBreaker-resilience4j整合"><img src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-CircuitBreaker-resilience4j整合"/></a><div class="content"><a class="title" href="/post/d0cc1785.html" title="SpringCloud-CircuitBreaker-resilience4j整合">SpringCloud-CircuitBreaker-resilience4j整合</a><time datetime="2021-02-06T09:25:11.000Z" title="发表于 2021-02-06 17:25:11">2021-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/28df3b26.html" title="SpringCloud-Hystrix整合"><img src="/loading.gif" data-original="https://c242p8.coding-pages.com/images/spring/thumbnail.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud-Hystrix整合"/></a><div class="content"><a class="title" href="/post/28df3b26.html" title="SpringCloud-Hystrix整合">SpringCloud-Hystrix整合</a><time datetime="2021-02-06T06:59:20.000Z" title="发表于 2021-02-06 14:59:20">2021-02-06</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Docker/"><span class="card-category-list-name">Docker</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Golang/"><span class="card-category-list-name">Golang</span><span class="card-category-list-count">12</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Intellij-Idea/"><span class="card-category-list-name">Intellij Idea</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JAVA/"><span class="card-category-list-name">JAVA</span><span class="card-category-list-count">16</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/JAVA/%E6%A1%86%E6%9E%B6/"><span class="card-category-list-name">框架</span><span class="card-category-list-count">7</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="card-category-list-name">数据库</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%8B%B1%E8%AF%AD/"><span class="card-category-list-name">英语</span><span class="card-category-list-count">5</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 1.1em; color: #999">AOP</a> <a href="/tags/CircuitBreaker/" style="font-size: 1.1em; color: #999">CircuitBreaker</a> <a href="/tags/Docker/" style="font-size: 1.1em; color: #999">Docker</a> <a href="/tags/Eureka/" style="font-size: 1.1em; color: #999">Eureka</a> <a href="/tags/Gateway/" style="font-size: 1.1em; color: #999">Gateway</a> <a href="/tags/Gin/" style="font-size: 1.1em; color: #999">Gin</a> <a href="/tags/Golang/" style="font-size: 1.5em; color: #99a9bf">Golang</a> <a href="/tags/Hystrix/" style="font-size: 1.1em; color: #999">Hystrix</a> <a href="/tags/Idea/" style="font-size: 1.1em; color: #999">Idea</a> <a href="/tags/JAVA8/" style="font-size: 1.1em; color: #999">JAVA8</a> <a href="/tags/JPA/" style="font-size: 1.17em; color: #999c9f">JPA</a> <a href="/tags/JWT/" style="font-size: 1.1em; color: #999">JWT</a> <a href="/tags/LoadBalancer/" style="font-size: 1.1em; color: #999">LoadBalancer</a> <a href="/tags/Mac/" style="font-size: 1.1em; color: #999">Mac</a> <a href="/tags/MySql/" style="font-size: 1.23em; color: #999ea6">MySql</a> <a href="/tags/OpenFeign/" style="font-size: 1.1em; color: #999">OpenFeign</a> <a href="/tags/Redis/" style="font-size: 1.1em; color: #999">Redis</a> <a href="/tags/Resilience4j/" style="font-size: 1.1em; color: #999">Resilience4j</a> <a href="/tags/SpringCloud/" style="font-size: 1.37em; color: #99a4b2">SpringCloud</a> <a href="/tags/SpringSecurity/" style="font-size: 1.1em; color: #999">SpringSecurity</a> <a href="/tags/StreamApi/" style="font-size: 1.17em; color: #999c9f">StreamApi</a> <a href="/tags/%E5%85%A5%E9%97%A8/" style="font-size: 1.43em; color: #99a6b9">入门</a> <a href="/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB/" style="font-size: 1.1em; color: #999">工具类</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 1.1em; color: #999">开发工具</a> <a href="/tags/%E6%8F%92%E4%BB%B6/" style="font-size: 1.1em; color: #999">插件</a> <a href="/tags/%E6%A1%86%E6%9E%B6/" style="font-size: 1.3em; color: #99a1ac">框架</a> <a href="/tags/%E7%BF%BB%E5%94%B1/" style="font-size: 1.17em; color: #999c9f">翻唱</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size: 1.3em; color: #99a1ac">英语</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 1.17em; color: #999c9f">设计模式</a> <a href="/tags/%E9%85%8D%E9%9F%B3/" style="font-size: 1.23em; color: #999ea6">配音</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/02/"><span class="card-archive-list-date">二月 2021</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/12/"><span class="card-archive-list-date">十二月 2020</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/09/"><span class="card-archive-list-date">九月 2020</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/07/"><span class="card-archive-list-date">七月 2020</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/06/"><span class="card-archive-list-date">六月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">五月 2020</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">39</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">58.7k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-04-28T15:50:46.571Z"></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Nathan</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        var from = '出自 ' + data.from
        var sub = "".length == 0 ? new Array() : "".split(',')
        var both = sub.unshift(data.hitokoto, from)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=i;var e=n.imageLazyLoadSetting.isSPA,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},n.src=i}()}i(),n.addEventListener("scroll",function(){var t,e;t=i,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script></body></html>